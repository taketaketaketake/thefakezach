---
import { projects } from "../data/projects";

// Map status values for display
const statusDisplayMap: Record<string, string> = {
  "shipped": "Live",
  "in-progress": "In Progress",
  "archived": "Legacy"
};

const pageTitle = "PROJECT ARCHIVE ‚Äì Cosmic Crew Universe";
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{pageTitle}</title>
    
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --aqua: #0EF2D4;
        --chartreuse: #CEF64D;
        --amber: #FFD55A;
        --navy: #0A214B;
        --indigo: #2B1A55;
        --pink: #FF0080;
        --cyan: #00FFFF;
      }

      body {
        background: linear-gradient(180deg, var(--navy), var(--indigo));
        color: white;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        line-height: 1.6;
        overflow-x: hidden;
      }

      #canvas-container {
        position: fixed;
        inset: 0;
        width: 100vw;
        height: 100vh;
        z-index: 0;
      }

      .content-wrapper {
        position: relative;
        z-index: 10;
        min-height: 100vh;
      }

      .hero-section {
        text-align: center;
        padding: 6rem 2rem 4rem;
        background: linear-gradient(135deg, rgba(14, 242, 212, 0.1), rgba(255, 0, 128, 0.1));
      }

      .hero-title {
        font-size: clamp(3rem, 8vw, 6rem);
        font-weight: 900;
        background: linear-gradient(45deg, var(--aqua), var(--pink), var(--chartreuse));
        background-size: 200% 200%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: gradient-flow 3s ease-in-out infinite;
        margin-bottom: 1rem;
      }

      .hero-subtitle {
        font-size: clamp(1.2rem, 3vw, 2rem);
        color: var(--cyan);
        margin-bottom: 2rem;
        font-weight: 600;
      }

      .hero-description {
        max-width: 800px;
        margin: 0 auto;
        font-size: 1.2rem;
        color: #e2e8f0;
        opacity: 0.9;
      }

      .projects-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 2rem 4rem;
      }

      .featured-grid {
        display: flex;
        flex-direction: column;
        gap: 2rem;
        margin-bottom: 4rem;
      }

      .project-card {
        background: rgba(0, 0, 0, 0.6);
        border: 2px solid var(--aqua);
        border-radius: 1rem;
        backdrop-filter: blur(10px);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        cursor: pointer;
        display: grid;
        grid-template-columns: 1fr 300px;
        gap: 2rem;
        align-items: center;
      }

      .project-card:hover {
        transform: translateY(-8px) scale(1.02);
        border-color: var(--pink);
        background: rgba(0, 0, 0, 0.8);
        box-shadow: 0 20px 40px rgba(255, 0, 128, 0.3);
      }

      .project-card.featured {
        border-color: var(--chartreuse);
        background: linear-gradient(135deg, rgba(206, 246, 77, 0.1), rgba(14, 242, 212, 0.1));
      }

      .project-card.featured:hover {
        border-color: var(--amber);
        background: linear-gradient(135deg, rgba(255, 213, 90, 0.2), rgba(255, 0, 128, 0.2));
      }

      .project-content {
        padding: 2rem;
      }

      .project-image-container {
        padding: 2rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .project-header {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1.5rem;
      }

      .project-emoji {
        font-size: 3rem;
        line-height: 1;
      }

      .project-title {
        font-size: 1.8rem;
        font-weight: 800;
        color: white;
        flex: 1;
      }

      .project-year {
        background: var(--navy);
        color: var(--aqua);
        padding: 0.25rem 0.75rem;
        border-radius: 2rem;
        font-size: 0.9rem;
        font-weight: 600;
      }

      .project-image {
        width: 300px;
        height: 300px;
        object-fit: cover;
        border-radius: 1rem;
        border: 2px solid rgba(255, 255, 255, 0.2);
      }

      .project-summary {
        color: #e2e8f0;
        font-size: 1.1rem;
        line-height: 1.6;
        margin-bottom: 1.5rem;
      }

      .project-tech {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
      }

      .tech-tag {
        background: rgba(255, 255, 255, 0.1);
        color: var(--aqua);
        padding: 0.25rem 0.75rem;
        border-radius: 1rem;
        font-size: 0.8rem;
        font-weight: 500;
        border: 1px solid var(--aqua);
      }

      .project-status {
        position: absolute;
        top: 1rem;
        right: 1rem;
        padding: 0.5rem 1rem;
        border-radius: 2rem;
        font-size: 0.8rem;
        font-weight: 700;
        text-transform: uppercase;
      }

      .status-shipped { background: var(--chartreuse); color: var(--navy); }
      .status-inprogress { background: var(--amber); color: var(--navy); }
      .status-archived { background: rgba(255, 255, 255, 0.2); color: white; }

      .project-links {
        display: flex;
        gap: 1rem;
      }

      .project-link {
        flex: 1;
        text-align: center;
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .link-primary {
        background: linear-gradient(45deg, var(--pink), var(--cyan));
        color: white;
      }

      .link-secondary {
        background: rgba(255, 255, 255, 0.1);
        color: var(--aqua);
        border: 1px solid var(--aqua);
      }

      .project-link:hover {
        transform: scale(1.05);
        box-shadow: 0 8px 20px rgba(255, 0, 128, 0.4);
      }

      .section-title {
        font-size: 2.5rem;
        font-weight: 800;
        color: var(--chartreuse);
        margin-bottom: 2rem;
        text-align: center;
      }

      .other-projects {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
      }

      .floating-elements {
        position: absolute;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
      }

      .float-icon {
        position: absolute;
        font-size: 2rem;
        opacity: 0.1;
        animation: float 6s ease-in-out infinite;
      }

      @keyframes gradient-flow {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
      }

      @keyframes float {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(180deg); }
      }

      @media (max-width: 968px) {
        .project-card {
          grid-template-columns: 1fr;
          grid-template-rows: auto auto;
        }
        
        .project-content {
          padding: 1.5rem;
        }

        .project-image-container {
          padding: 1.5rem;
          order: -1;
        }

        .project-image {
          width: 100%;
          height: 200px;
        }

        .hero-section {
          padding: 4rem 1rem 3rem;
        }
      }
    </style>
  </head>

  <body>
    <!-- Three.js Background -->
    <div id="canvas-container"></div>

    <div class="content-wrapper">
      <!-- Floating Elements -->
      <div class="floating-elements">
        <div class="float-icon" style="top: 10%; left: 5%; animation-delay: 0s;">üöÄ</div>
        <div class="float-icon" style="top: 20%; right: 10%; animation-delay: 2s;">‚ö°</div>
        <div class="float-icon" style="top: 60%; left: 8%; animation-delay: 4s;">ü§ñ</div>
        <div class="float-icon" style="bottom: 30%; right: 15%; animation-delay: 1s;">üó∫Ô∏è</div>
        <div class="float-icon" style="bottom: 20%; left: 12%; animation-delay: 3s;">üß∫</div>
        <div class="float-icon" style="top: 40%; right: 5%; animation-delay: 5s;">üë®‚ÄçüöÄ</div>
      </div>

      <!-- Hero Section -->
      <div class="hero-section">
        <h1 class="hero-title">PROJECT ARCHIVE</h1>
        <p class="hero-subtitle">Digital Frontiers & Technical Expeditions</p>
        <p class="hero-description">
          A collection of full-stack applications, AI experiments, and creative technology projects. 
          Each mission represents a unique challenge solved through innovative engineering and design.
        </p>
      </div>

      <!-- Projects Container -->
      <div class="projects-container">
        
        <!-- Featured Projects -->
        <div class="section-title">FLAGSHIP MISSIONS</div>
        <div class="featured-grid">
          {projects.filter(p => p.featured).map((project) => (
            <a 
              href={project.link || project.github} 
              target="_blank" 
              rel="noopener noreferrer"
              class="project-card featured"
            >
              <div class={`project-status status-${project.status.toLowerCase().replace('-', '')}`}>
                {statusDisplayMap[project.status]}
              </div>

              <!-- Left Column: Content -->
              <div class="project-content">
                <div class="project-header">
                  <div class="project-emoji">{project.emoji}</div>
                  <div class="project-title">{project.title}</div>
                  <div class="project-year">{project.year}</div>
                </div>

                <div class="project-summary">{project.summary}</div>

                <div class="project-tech">
                  {project.tech.slice(0, 6).map((tech) => (
                    <span class="tech-tag">{tech}</span>
                  ))}
                  {project.tech.length > 6 && (
                    <span class="tech-tag">+{project.tech.length - 6} more</span>
                  )}
                </div>

                <div class="project-links">
                  {project.link && project.link !== "#" && (
                    <div class="project-link link-primary">
                      Launch Project
                    </div>
                  )}
                  {project.github && project.github !== "#" && (
                    <div class="project-link link-secondary">
                      View Code
                    </div>
                  )}
                </div>
              </div>

              <!-- Right Column: Image -->
              <div class="project-image-container">
                {project.image ? (
                  <img src={project.image} alt={project.title} class="project-image" />
                ) : (
                  <div class="project-image" style="display: flex; align-items: center; justify-content: center; background: rgba(255,255,255,0.1); color: #666; font-size: 4rem;">
                    {project.emoji}
                  </div>
                )}
              </div>
            </a>
          ))}
        </div>

        <!-- Other Projects -->
        <div class="section-title">ADDITIONAL MISSIONS</div>
        <div class="other-projects">
          {projects.filter(p => !p.featured).map((project) => (
            <a
              href={project.link || project.github}
              target="_blank"
              rel="noopener noreferrer"
              class="project-card"
            >
              <div class={`project-status status-${project.status.toLowerCase().replace('-', '')}`}>
                {statusDisplayMap[project.status]}
              </div>
              
              <!-- Left Column: Content -->
              <div class="project-content">
                <div class="project-header">
                  <div class="project-emoji">{project.emoji}</div>
                  <div class="project-title">{project.title}</div>
                  <div class="project-year">{project.year}</div>
                </div>

                <div class="project-summary">{project.summary}</div>

                <div class="project-tech">
                  {project.tech.slice(0, 4).map((tech) => (
                    <span class="tech-tag">{tech}</span>
                  ))}
                  {project.tech.length > 4 && (
                    <span class="tech-tag">+{project.tech.length - 4}</span>
                  )}
                </div>
              </div>

              <!-- Right Column: Image -->
              <div class="project-image-container">
                {project.image ? (
                  <img src={project.image} alt={project.title} class="project-image" />
                ) : (
                  <div class="project-image" style="display: flex; align-items: center; justify-content: center; background: rgba(255,255,255,0.1); color: #666; font-size: 4rem;">
                    {project.emoji}
                  </div>
                )}
              </div>
            </a>
          ))}
        </div>

      </div>
    </div>

    <!-- Three.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- Three.js Background Script -->
    <script>
      let scene, camera, renderer, starField;
      let time = 0;

      function init() {
        console.log('Initializing Project Archive background...');
        
        if (typeof THREE === 'undefined') {
          console.error('THREE.js not loaded');
          return;
        }
        
        scene = new THREE.Scene();
        
        camera = new THREE.PerspectiveCamera(
          60,
          window.innerWidth / window.innerHeight,
          0.1,
          2000
        );
        camera.position.set(0, 0, 100);

        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setClearColor(0x0A214B, 1);
        renderer.outputEncoding = THREE.sRGBEncoding;

        const container = document.getElementById("canvas-container");
        if (!container) {
          console.error('Canvas container not found');
          return;
        }
        container.appendChild(renderer.domElement);

        createStarField();
        createFloatingProjects();

        window.addEventListener("resize", onResize);
        animate();
        
        console.log('Project Archive background initialized');
      }

      function createStarField() {
        const starGeometry = new THREE.BufferGeometry();
        const starVertices = [];
        const starColors = [];
        
        for (let i = 0; i < 600; i++) {
          const x = (Math.random() - 0.5) * 1000;
          const y = (Math.random() - 0.5) * 800;
          const z = -500 + Math.random() * 300;
          
          starVertices.push(x, y, z);
          
          const brightness = 0.5 + Math.random() * 0.5;
          starColors.push(brightness, brightness, brightness);
        }
        
        starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
        starGeometry.setAttribute('color', new THREE.Float32BufferAttribute(starColors, 3));
        
        const starMaterial = new THREE.PointsMaterial({
          size: 2,
          transparent: true,
          opacity: 0.8,
          vertexColors: true,
          sizeAttenuation: true
        });
        
        starField = new THREE.Points(starGeometry, starMaterial);
        scene.add(starField);
      }

      function createFloatingProjects() {
        const projectIcons = ['üöÄ', 'ü§ñ', 'üó∫Ô∏è', 'üß∫', 'üë®‚ÄçüöÄ'];
        
        for (let i = 0; i < 15; i++) {
          const canvas = document.createElement('canvas');
          canvas.width = 128;
          canvas.height = 128;
          const context = canvas.getContext('2d');
          
          context.font = '64px Arial';
          context.textAlign = 'center';
          context.textBaseline = 'middle';
          context.fillText(
            projectIcons[Math.floor(Math.random() * projectIcons.length)], 
            64, 64
          );
          
          const texture = new THREE.CanvasTexture(canvas);
          const material = new THREE.SpriteMaterial({ 
            map: texture, 
            transparent: true,
            opacity: 0.1 
          });
          const sprite = new THREE.Sprite(material);
          
          sprite.position.set(
            (Math.random() - 0.5) * 800,
            (Math.random() - 0.5) * 600,
            -200 + Math.random() * 100
          );
          sprite.scale.set(20, 20, 1);
          sprite.userData = {
            speed: 0.001 + Math.random() * 0.002,
            rotationSpeed: (Math.random() - 0.5) * 0.01
          };
          
          scene.add(sprite);
        }
      }

      function animate() {
        requestAnimationFrame(animate);
        time += 0.01;

        if (starField) {
          starField.rotation.y += 0.0001;
          starField.rotation.x += 0.0002;
        }

        scene.children.forEach((child) => {
          if (child instanceof THREE.Sprite) {
            child.position.y += child.userData.speed * 100;
            child.rotation.z += child.userData.rotationSpeed;
            
            if (child.position.y > 400) {
              child.position.y = -400;
            }
          }
        });

        renderer.render(scene, camera);
      }

      function onResize() {
        renderer.setSize(window.innerWidth, window.innerHeight);
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
      }

      document.addEventListener('DOMContentLoaded', () => {
        console.log('DOM loaded, initializing...');
        
        function waitForThree() {
          if (typeof THREE !== 'undefined') {
            console.log('THREE.js loaded, starting init...');
            init();
          } else {
            console.log('Waiting for THREE.js...');
            setTimeout(waitForThree, 100);
          }
        }
        
        waitForThree();
      });
    </script>

  </body>
</html>