---
import { getCollection } from "astro:content";
import "../../styles/global.css";

export async function getStaticPaths() {
  const caseStudies = await getCollection("case-studies");
  return caseStudies.map((study) => ({
    params: { slug: study.slug },
    props: { study },
  }));
}

const { study } = Astro.props;
const { Content } = await study.render();
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>{study.data.title} | Case Study | Zachary Lewis</title>
  </head>

  <body class="bg-zinc-950 text-zinc-50 font-sans">
    <main class="max-w-4xl mx-auto px-6 py-24">
      <a href="/case-studies" class="text-sm text-zinc-400 hover:text-pink-400 transition">
        ← Back to all case studies
      </a>

      <header class="mt-8 mb-12">
        <div class="text-5xl mb-4">{study.data.emoji}</div>
        <h1 class="text-4xl font-extrabold text-white mb-2">
          {study.data.title}
        </h1>
        <p class="text-zinc-400">{study.data.summary}</p>
        <p class="text-xs text-zinc-600 mt-2">{study.data.year}</p>
      </header>

      <section class="space-y-10">
        <article>
          <h2 class="text-2xl font-bold text-white mb-3">Problem</h2>
          <p class="text-zinc-400 leading-relaxed whitespace-pre-line">
            {study.data.problem}
          </p>
        </article>

        <article>
          <h2 class="text-2xl font-bold text-white mb-3">Solution</h2>
          <p class="text-zinc-400 leading-relaxed whitespace-pre-line">
            {study.data.solution}
          </p>
        </article>

        <article>
          <h2 class="text-2xl font-bold text-white mb-3">Tech Stack</h2>
          <ul class="flex flex-wrap gap-3">
            {study.data.tech.map((tool) => (
              <li
                class="px-3 py-1 text-sm bg-zinc-800 text-zinc-300 rounded-full border border-zinc-700"
              >
                {tool}
              </li>
            ))}
          </ul>
        </article>

        {study.data.link && (
          <article>
            <h2 class="text-2xl font-bold text-white mb-3">Live Project</h2>
            <a
              href={study.data.link}
              target="_blank"
              class="text-pink-400 hover:underline"
            >
              {study.data.link}
            </a>
          </article>
        )}
      </section>
    </main>

    <footer
      class="border-t border-zinc-800 mt-16 py-12 text-center text-sm text-zinc-500"
    >
      © {new Date().getFullYear()} Zachary Lewis
    </footer>
  </body>
</html>
