---
import "../styles/global.css";
import Card from "../components/Card.astro";
import Modal from "../components/Modal.astro";
import CollapsibleCard from "../components/CollapsibleCard.astro";
import ProjectsButton from "../components/ProjectsButton.astro";
import ContactButton from "../components/ContactButton.astro";
import ProjectsSection from "../components/ProjectsSection.astro";
import WallSection from "../components/WallSection.astro";

const zachary = {
  name: "Zachary",
  username: "thefakezach",
  avatarEmoji: "ğŸ’¡",
  joinDate: "Building from Detroit, MI",
  about: `Iâ€™m a designer, developer, and systems thinker ğŸ˜‚ based in Detroit.

I build tools and experiences that blend technology, automation, and storytelling â€” helping brands and projects come alive.`,
  contact: {
    twitter: "#",
    github: "#",
    linkedin: "#",
    email: "mailto:hello@zacharylewis.com"
  },
  projects: [
    { title: "Detroit Small Business Map", emoji: "ğŸ—ºï¸" },
    { title: "Bags of Laundry", emoji: "ğŸ§º" },
    { title: "Fix My Furnace", emoji: "ğŸ¤–" },
    { title: "AI Voice Agents", emoji: "ğŸ—£ï¸" },
    { title: "Take Detroit", emoji: "ğŸš€" },
    { title: "Cosmic Crew", emoji: "ğŸŒŒ" }
  ]
};
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{zachary.name} | Designer & Developer</title>
  </head>

  <body class="bg-zinc-950 text-zinc-50 font-sans min-h-screen flex flex-col">
    <!-- Hero Header -->
    <header class="relative overflow-hidden">
      <!-- Gradient Banner -->
      <div class="h-48 bg-gradient-to-br from-pink-600 via-purple-600 to-indigo-700"></div>

      <!-- Profile Card (Overlaps Banner) -->
      <div class="relative -mt-20 px-4 sm:px-6 max-w-5xl mx-auto">
        <div class="bg-zinc-900/80 backdrop-blur-sm rounded-2xl p-6 shadow-2xl border border-zinc-800">
          <div class="flex flex-col sm:flex-row items-center sm:items-end gap-5">
            <!-- Avatar -->
            <div class="w-24 h-24 sm:w-32 sm:h-32 rounded-full bg-zinc-800 border-4 border-zinc-950 flex items-center justify-center text-5xl sm:text-7xl shadow-xl flex-shrink-0">
              {zachary.avatarEmoji}
            </div>

            <!-- Name & Info -->
            <div class="flex-1 text-center sm:text-left">
              <h1 class="text-2xl sm:text-3xl font-bold text-white">{zachary.name}</h1>
              <p class="text-pink-400 text-lg font-medium">@{zachary.username}</p>
              <p class="text-sm text-zinc-400 mt-1">{zachary.joinDate}</p>
            </div>

            <!-- Action Buttons -->
            <div class="flex gap-3 mt-4 sm:mt-0">
              <ContactButton href={zachary.contact.email} label="Contact" />
              <ProjectsButton href="#projects" label="Projects" />
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 max-w-5xl mx-auto px-4 sm:px-6 py-10 space-y-12 w-full">

      <!-- About & Links (Collapsible on Mobile) -->
      <CollapsibleCard title="About" open={true}>
        <div class="prose prose-invert max-w-none text-zinc-300 text-base md:text-lg leading-relaxed">
          {zachary.about.split('\n').map(line =>
            line.trim() && <p class="mb-3">{line}</p>
          )}
        </div>
      </CollapsibleCard>

      <WallSection
        posts={[
          {
            name: "Chris P.",
            date: "October 28, 2025",
            message: "Loved your Detroit Small Business Map project. Super inspiring!"
          },
          {
            name: "Avery",
            date: "October 27, 2025",
            message: "That Bags of Laundry campaign is genius ğŸ’¡. Keep it up!"
          },
          {
            name: "Jamie L.",
            date: "October 25, 2025",
            message: "Your AI Voice Concierge concept is ğŸ”¥. Excited to see where it goes!"
          }
        ]}
      />

      <!-- Projects Section -->
      <ProjectsSection projects={zachary.projects} />
      

    </main>

    <!-- Footer -->
    <footer class="mt-auto border-t border-zinc-800 py-8 text-center text-xs text-zinc-500">
      <p>Â© {new Date().getFullYear()} {zachary.name}. All Rights Reserved.</p>
    </footer>

    <!-- Modals -->
    {zachary.projects.map(project => (
      <Modal project={project} />
    ))}

    <!-- Modal Script (Unchanged) -->
    <script define:vars={{ projects: zachary.projects }}>
      for (const project of projects) {
        const slug = project.title.toLowerCase().replace(/ /g, "-");
        const openButton = document.getElementById(`open-${slug}`);
        const closeButton = document.getElementById(`close-${slug}`);
        const modal = document.getElementById(`modal-${slug}`);

        if (!openButton || !modal) continue;

        openButton.addEventListener("click", () => {
          modal.classList.remove("hidden");
          modal.classList.add("flex");
          modal.setAttribute("aria-hidden", "false");
          document.body.style.overflow = "hidden";
        });

        if (closeButton) {
          closeButton.addEventListener("click", () => {
            modal.classList.add("hidden");
            modal.classList.remove("flex");
            modal.setAttribute("aria-hidden", "true");
            document.body.style.overflow = "";
          });
        }

        modal.addEventListener("click", (e) => {
          if (e.target === modal) {
            modal.classList.add("hidden");
            modal.classList.remove("flex");
            modal.setAttribute("aria-hidden", "true");
            document.body.style.overflow = "";
          }
        });
      }
    </script>
  </body>
</html>