---
import "../styles/global.css";
import Card from "../components/Card.astro";
import Modal from "../components/Modal.astro";
import CollapsibleCard from "../components/CollapsibleCard.astro";
import ProjectsButton from "../components/ProjectsButton.astro";
import ContactButton from "../components/ContactButton.astro";
import ProjectsSection from "../components/ProjectsSection.astro";
import WallSection from "../components/WallSection.astro";

const zachary = {
  name: "Zachary Lewis",
  username: "thefakezach",
  avatarPhoto: "/profile-photo.jpg",
  joinDate: "Building from Detroit, MI",
  about: `I like to build things, wherever I am. Here is where I share my projects and ideas:`,
  contact: {
    twitter: "#",
    github: "#",
    linkedin: "#",
    email: "mailto:zach at takedetroit.com"
  },
  projects: [
    { 
      title: "Detroit Small Business Map", 
      emoji: "üó∫Ô∏è",
      image: "/projects/detroit-small-biz-cover-photo.png",
      year: "2025",
      summary: "A comprehensive business discovery platform connecting Detroit's local community with neighborhood businesses through interactive maps, verified data, and social engagement features.",
      problem: "Detroit's diverse business ecosystem lacked a unified platform for discovery and community engagement. Existing solutions were either too generic, missing cannabis compliance features, or didn't provide the social interaction that builds local connections.",
      solution: "Built a full-stack platform combining business directory functionality with social features, role-based management, and cannabis industry compliance. Integrated Google Places API for verified business data and Mapbox for location discovery.",
      tech: ["Astro 5", "TypeScript", "React", "PostgreSQL", "TailwindCSS", "Mapbox GL", "Google Places API", "Netlify"],
      link: "",
      github: "https://github.com/taketaketaketake/detroit-small-business-map"
    },
    { 
      title: "Bags of Laundry", 
      emoji: "üß∫",
      image: "/projects/bags-cover-photo 2.png",
      year: "2025",
      summary: "An innovative laundry service platform connecting customers with local providers.",
      problem: "Most laundromats still operate with manual processes and word-of-mouth communication, missing the digital transformation that customers expect in the modern era.",
      solution: "Built a full-stack laundry service platform featuring AI-powered voice ordering, real-time capacity management, photo documentation workflows, and subscription-based pricing. Serves residential customers, Airbnb hosts, and commercial clients across 30+ Detroit suburbs.",
      tech: ["Astro", "React", "TypeScript", "Tailwind", "PostgreSQL", "Stripe", "Twilio (for now)", "Netlify", "Mapbox API"],
      link: "https://bagsoflaundry.com",
      github: "#"
    },
    { 
      title: "Fix My Furnace", 
      emoji: "ü§ñ",
      image: "/projects/fix-my-furnace-cover-photo.png",
      year: "2025",
      summary: "Comprehensive HVAC service marketplace connecting Michigan homeowners with vetted contractors through photo diagnosis, pricing transparency, and lead generation.",
      problem: "Michigan homeowners struggle to find trustworthy HVAC contractors and fair pricing, often facing expensive repairs without knowing if they're being overcharged or need professional help.",
      solution: "Built a full-service platform featuring photo-based furnace diagnosis, a transparent pricing database from real contracts, and a vetted contractor network across all 83 Michigan counties with lead routing and $125 professional assessments.",
      tech: ["Astro.js", "TypeScript", "TailwindCSS", "Supabase", "Mapbox API", "Netlify"],
      link: "https://fixmyfurnacedetroit.com",
      github: "#"
    },
    { 
      title: "AI Voice Agents", 
      emoji: "üó£Ô∏è",
      year: "2025",
      summary: "Intelligent voice assistants for businesses to handle customer inquiries automatically with SMS/MMS support.",
      problem: "HVAC lead generation companies need 24/7 phone support to capture leads but struggle with staffing costs and missed calls during high-demand periods.",
      solution: "Built AI-powered voice agents using Telnyx's Voice API and Deepgram for ultra-low latency speech recognition. The system collects customer information through natural conversations, supports SMS/MMS inquiries, and automatically saves all interactions to a database for follow-up. This is the newer version with higher quality voice and lower latency.",
      tech: ["Node.js", "Express", "Telnyx Voice API", "Deepgram", "Supabase", "PostgreSQL", "Telnyx Messaging API"],
      link: "https://github.com/taketaketaketake/Telnyx-voice-agent",
      github: "#"
    },
    { 
      title: "Take Detroit", 
      emoji: "üöÄ",
      image: "/projects/take-detroit-cupcakes.jpg",
      year: "2017",
      summary: "Community platform celebrating Detroit's entrepreneurial spirit and local initiatives.",
      problem: "Detroit's entrepreneurial community lacks a central hub to showcase projects and connect like-minded individuals.",
      solution: "Created a community-driven platform where local entrepreneurs can showcase their projects, find collaborators, and access resources.",
      tech: ["Vue.js", "Firebase", "Nuxt.js", "Bulma CSS"],
      link: "https://facebook.com/takedetroitdotcom",
      github: "#"
    },
    { 
      title: "Cosmic Crew", 
      emoji: "üë®‚ÄçüöÄ",
      image: "/projects/cosmic-crew-image.png",
      year: "2025",
      summary: "Interactive educational web game teaching programming concepts through space exploration.",
      problem: "Traditional programming education lacks engaging, interactive methods to teach fundamental coding concepts to beginners.",
      solution: "Created 'The Cosmic Crew' - a 3D web-based educational game where players explore space while learning programming fundamentals through character-based storylines (Debug Kid, Loop Kid, If-Then Kid).",
      tech: ["JavaScript", "Three.js", "WebGL", "CSS3D", "HTML5", "Tailwind CSS", "GLTF/GLB 3D Models"],
      link: "https://cosmiccrew.club/",
      github: "#"
    }
  ]
};
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Primary Meta Tags -->
    <title>{zachary.name} | Designer & Developer</title>
    <meta name="title" content="{zachary.name} | Designer & Developer" />
    <meta name="description" content="Detroit-based developer and designer creating innovative web solutions. Building AI voice agents, business maps, and digital experiences from Motor City." />
    <meta name="keywords" content="Detroit developer, Michigan web developer, AI voice agents, business mapping, software engineer, web design, Motor City tech" />
    <meta name="author" content="{zachary.name}" />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="English" />
    <meta name="theme-color" content="#ec4899" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://thefakezach.com/" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://thefakezach.com/" />
    <meta property="og:title" content="{zachary.name} | Designer & Developer" />
    <meta property="og:description" content="Detroit-based developer and designer creating innovative web solutions. Building AI voice agents, business maps, and digital experiences from Motor City." />
    <meta property="og:image" content="https://thefakezach.com/og-image.jpg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content="Zachary Lewis - Detroit Developer & Designer" />
    <meta property="og:site_name" content="{zachary.name}" />
    <meta property="og:locale" content="en_US" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://thefakezach.com/" />
    <meta name="twitter:title" content="{zachary.name} | Designer & Developer" />
    <meta name="twitter:description" content="Detroit-based developer and designer creating innovative web solutions. Building AI voice agents, business maps, and digital experiences from Motor City." />
    <meta name="twitter:image" content="https://thefakezach.com/og-image.jpg" />
    <meta name="twitter:image:alt" content="Zachary Lewis - Detroit Developer & Designer" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    
    <!-- Preload Critical Resources -->
    <link rel="preload" href="/fonts/inter.woff2" as="font" type="font/woff2" crossorigin />
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "{zachary.name}",
      "url": "https://thefakezach.com",
      "image": "https://thefakezach.com/og-image.jpg",
      "jobTitle": "Developer & Designer",
      "worksFor": {
        "@type": "Organization",
        "name": "Freelance"
      },
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Detroit",
        "addressRegion": "MI",
        "addressCountry": "US"
      },
      "alumniOf": "University",
      "knowsAbout": ["Web Development", "AI Voice Agents", "Business Mapping", "Software Engineering", "Product Design"],
      "description": "Detroit-based developer and designer creating innovative web solutions.",
      "sameAs": [
        "https://github.com/thefakezach",
        "https://linkedin.com/in/thefakezach"
      ]
    }
    </script>
  </head>

  <body class="bg-zinc-950 text-zinc-50 font-sans min-h-screen flex flex-col">
    <!-- Hero Header -->
    <header class="relative overflow-hidden">
      <!-- Gradient Banner -->
      <div class="h-48 bg-gradient-to-br from-pink-600 via-purple-600 to-indigo-700"></div>

      <!-- Profile Card (Overlaps Banner) -->
      <div class="relative -mt-20 px-4 sm:px-6 max-w-5xl mx-auto">
        <div class="bg-zinc-900/80 backdrop-blur-sm rounded-2xl p-6 shadow-2xl border border-zinc-800">
          <div class="flex flex-col sm:flex-row items-center sm:items-end gap-5">
            <!-- Avatar -->
            <div class="w-24 h-24 sm:w-32 sm:h-32 rounded-full bg-zinc-800 border-4 border-zinc-950 shadow-xl flex-shrink-0 overflow-hidden">
              <img 
                src={zachary.avatarPhoto} 
                alt={`${zachary.name} profile photo`}
                class="w-full h-full object-cover"
                loading="eager"
              />
            </div>

            <!-- Name & Info -->
            <div class="flex-1 text-center sm:text-left">
              <h1 class="text-2xl sm:text-3xl font-bold text-white">{zachary.name}</h1>
              <p class="text-pink-400 text-lg font-medium" role="complementary">@{zachary.username}</p>
              <p class="text-sm text-zinc-400 mt-1">{zachary.joinDate}</p>
            </div>

          </div>
        </div>
      </div>
    </header>

    <!-- Tab Navigation -->
    <nav class="sticky top-0 z-10 bg-zinc-950/95 backdrop-blur-sm border-b border-zinc-800">
      <div class="max-w-5xl mx-auto px-4 sm:px-6">
        <div class="flex justify-center gap-1">
          <button
            class="tab-button px-6 py-4 text-sm font-medium text-zinc-400 hover:text-white transition-colors relative"
            data-tab="0"
            aria-label="About tab"
          >
            About
            <span class="tab-indicator absolute bottom-0 left-0 right-0 h-0.5 bg-pink-500 transform scale-x-0 transition-transform"></span>
          </button>
          <button
            class="tab-button px-6 py-4 text-sm font-medium text-zinc-400 hover:text-white transition-colors relative active"
            data-tab="1"
            aria-label="Wall tab"
          >
            Wall
            <span class="tab-indicator absolute bottom-0 left-0 right-0 h-0.5 bg-pink-500 transform transition-transform"></span>
          </button>
          <button
            class="tab-button px-6 py-4 text-sm font-medium text-zinc-400 hover:text-white transition-colors relative"
            data-tab="2"
            aria-label="Projects tab"
          >
            Projects
            <span class="tab-indicator absolute bottom-0 left-0 right-0 h-0.5 bg-pink-500 transform scale-x-0 transition-transform"></span>
          </button>
        </div>
      </div>
    </nav>

    <!-- Swipeable Container -->
    <div class="swipe-wrapper overflow-hidden">
      <div class="swipe-container flex transition-transform duration-300 ease-out" style="transform: translateX(-100%)">

        <!-- Panel 1: About -->
        <div class="swipe-panel flex-shrink-0 w-full">
          <main class="max-w-5xl mx-auto px-4 sm:px-6 py-10">
            <div class="bg-zinc-900/50 backdrop-blur border border-zinc-800 rounded-2xl p-6">
              <h2 class="text-2xl font-bold text-white mb-4">About</h2>
              <div class="prose prose-invert max-w-none text-zinc-300 text-base md:text-lg leading-relaxed">
                {zachary.about.split('\n').map(line =>
                  line.trim() && <p class="mb-3">{line}</p>
                )}
              </div>
            </div>
          </main>
        </div>

        <!-- Panel 2: Wall -->
        <div class="swipe-panel flex-shrink-0 w-full">
          <main class="max-w-5xl mx-auto px-4 sm:px-6 py-10">
            <WallSection
              posts={[
                {
                  name: "Chris P.",
                  date: "October 28, 2025",
                  message: "Loved your Detroit Small Business Map project. Super inspiring!"
                },
                {
                  name: "Avery",
                  date: "October 27, 2025",
                  message: "That Bags of Laundry campaign is genius üí°. Keep it up!"
                },
                {
                  name: "Jamie L.",
                  date: "October 25, 2025",
                  message: "Your AI Voice Concierge concept is üî•. Excited to see where it goes!"
                }
              ]}
            />
          </main>
        </div>

        <!-- Panel 3: Projects -->
        <div class="swipe-panel flex-shrink-0 w-full">
          <main class="max-w-5xl mx-auto px-4 sm:px-6 py-10">
            <ProjectsSection projects={zachary.projects} />
          </main>
        </div>

      </div>
    </div>

    <!-- Footer -->
    <footer class="mt-auto border-t border-zinc-800 py-8 text-center text-xs text-zinc-500">
      <p>¬© {new Date().getFullYear()} {zachary.name}. All Rights Reserved.</p>
    </footer>

    <!-- Modals -->
    {zachary.projects.map(project => (
      <Modal project={project} />
    ))}

    <!-- Modal Script (Unchanged) -->
    <script define:vars={{ projects: zachary.projects }}>
      for (const project of projects) {
        const slug = project.title.toLowerCase().replace(/ /g, "-");
        const openButton = document.getElementById(`open-${slug}`);
        const closeButton = document.getElementById(`close-${slug}`);
        const modal = document.getElementById(`modal-${slug}`);

        if (!openButton || !modal) continue;

        openButton.addEventListener("click", () => {
          modal.classList.remove("hidden");
          modal.classList.add("flex");
          modal.setAttribute("aria-hidden", "false");
          document.body.style.overflow = "hidden";
        });

        if (closeButton) {
          closeButton.addEventListener("click", () => {
            modal.classList.add("hidden");
            modal.classList.remove("flex");
            modal.setAttribute("aria-hidden", "true");
            document.body.style.overflow = "";
          });
        }

        modal.addEventListener("click", (e) => {
          if (e.target === modal) {
            modal.classList.add("hidden");
            modal.classList.remove("flex");
            modal.setAttribute("aria-hidden", "true");
            document.body.style.overflow = "";
          }
        });
      }
    </script>

    <!-- Swipe Functionality Script -->
    <script>
      let currentTab = 1; // Start with Wall (index 1)
      const container = document.querySelector('.swipe-container');
      const tabButtons = document.querySelectorAll('.tab-button');
      const totalTabs = 3;

      let touchStartX = 0;
      let touchEndX = 0;
      let isDragging = false;
      let startX = 0;
      let currentTranslate = 0;
      let prevTranslate = 0;

      // Update active tab and position
      function switchToTab(index) {
        if (index < 0 || index >= totalTabs) return;

        currentTab = index;
        const offset = -index * 100;
        container.style.transform = `translateX(${offset}%)`;

        // Update tab button states
        tabButtons.forEach((btn, i) => {
          if (i === index) {
            btn.classList.add('active');
            btn.classList.remove('text-zinc-400');
            btn.classList.add('text-white');
            btn.querySelector('.tab-indicator').style.transform = 'scaleX(1)';
          } else {
            btn.classList.remove('active');
            btn.classList.add('text-zinc-400');
            btn.classList.remove('text-white');
            btn.querySelector('.tab-indicator').style.transform = 'scaleX(0)';
          }
        });
      }

      // Tab button clicks
      tabButtons.forEach((button, index) => {
        button.addEventListener('click', () => {
          switchToTab(index);
        });
      });

      // Touch events for mobile swipe
      const wrapper = document.querySelector('.swipe-wrapper');

      wrapper.addEventListener('touchstart', (e) => {
        touchStartX = e.touches[0].clientX;
        isDragging = true;
        container.style.transition = 'none';
      });

      wrapper.addEventListener('touchmove', (e) => {
        if (!isDragging) return;

        touchEndX = e.touches[0].clientX;
        const diff = touchEndX - touchStartX;
        const maxTranslate = 0;
        const minTranslate = -(totalTabs - 1) * 100;
        const baseTranslate = -currentTab * 100;
        const movePercent = (diff / window.innerWidth) * 100;

        let newTranslate = baseTranslate + movePercent;
        newTranslate = Math.max(minTranslate, Math.min(maxTranslate, newTranslate));

        container.style.transform = `translateX(${newTranslate}%)`;
      });

      wrapper.addEventListener('touchend', () => {
        if (!isDragging) return;

        isDragging = false;
        container.style.transition = 'transform 0.3s ease-out';

        const diff = touchEndX - touchStartX;
        const threshold = 50; // minimum swipe distance

        if (Math.abs(diff) > threshold) {
          if (diff > 0 && currentTab > 0) {
            // Swipe right - go to previous tab
            switchToTab(currentTab - 1);
          } else if (diff < 0 && currentTab < totalTabs - 1) {
            // Swipe left - go to next tab
            switchToTab(currentTab + 1);
          } else {
            // Not enough distance, snap back
            switchToTab(currentTab);
          }
        } else {
          // Not enough distance, snap back
          switchToTab(currentTab);
        }

        touchStartX = 0;
        touchEndX = 0;
      });

      // Mouse drag for desktop
      wrapper.addEventListener('mousedown', (e) => {
        isDragging = true;
        startX = e.clientX;
        container.style.transition = 'none';
        wrapper.style.cursor = 'grabbing';
      });

      wrapper.addEventListener('mousemove', (e) => {
        if (!isDragging) return;

        e.preventDefault();
        const currentX = e.clientX;
        const diff = currentX - startX;
        const maxTranslate = 0;
        const minTranslate = -(totalTabs - 1) * 100;
        const baseTranslate = -currentTab * 100;
        const movePercent = (diff / window.innerWidth) * 100;

        let newTranslate = baseTranslate + movePercent;
        newTranslate = Math.max(minTranslate, Math.min(maxTranslate, newTranslate));

        container.style.transform = `translateX(${newTranslate}%)`;
      });

      wrapper.addEventListener('mouseup', (e) => {
        if (!isDragging) return;

        isDragging = false;
        container.style.transition = 'transform 0.3s ease-out';
        wrapper.style.cursor = 'grab';

        const diff = e.clientX - startX;
        const threshold = 50;

        if (Math.abs(diff) > threshold) {
          if (diff > 0 && currentTab > 0) {
            switchToTab(currentTab - 1);
          } else if (diff < 0 && currentTab < totalTabs - 1) {
            switchToTab(currentTab + 1);
          } else {
            switchToTab(currentTab);
          }
        } else {
          switchToTab(currentTab);
        }
      });

      wrapper.addEventListener('mouseleave', () => {
        if (isDragging) {
          isDragging = false;
          container.style.transition = 'transform 0.3s ease-out';
          wrapper.style.cursor = 'grab';
          switchToTab(currentTab);
        }
      });

      // Keyboard navigation (arrow keys)
      document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft' && currentTab > 0) {
          switchToTab(currentTab - 1);
        } else if (e.key === 'ArrowRight' && currentTab < totalTabs - 1) {
          switchToTab(currentTab + 1);
        }
      });

      // Initialize
      wrapper.style.cursor = 'grab';
      switchToTab(currentTab);
    </script>

    <style>
      .tab-button.active {
        color: white;
      }

      .swipe-wrapper {
        min-height: 60vh;
        touch-action: pan-y; /* Allow vertical scrolling within panels */
      }

      .swipe-container {
        will-change: transform;
      }

      .swipe-panel {
        min-height: 60vh;
      }
    </style>
  </body>
</html>