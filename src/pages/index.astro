---
import "../styles/global.css";
import Card from "../components/Card.astro";
import Modal from "../components/Modal.astro";
import CollapsibleCard from "../components/CollapsibleCard.astro";
import ProjectsButton from "../components/ProjectsButton.astro";
import ContactButton from "../components/ContactButton.astro";
import ProjectsSection from "../components/ProjectsSection.astro";
import WallSection from "../components/WallSection.astro";

const zachary = {
  name: "Zachary",
  username: "thefakezach",
  avatarEmoji: "üí°",
  joinDate: "Building from Detroit, MI",
  about: `I like to build things, wherever I am. Here is where I share my projects and ideas:`,
  contact: {
    twitter: "#",
    github: "#",
    linkedin: "#",
    email: "mailto:zachary@thefakezach.com"
  },
  projects: [
    { title: "Detroit Small Business Map", emoji: "üó∫Ô∏è" },
    { title: "Bags of Laundry", emoji: "üß∫" },
    { title: "Fix My Furnace", emoji: "ü§ñ" },
    { title: "AI Voice Agents", emoji: "üó£Ô∏è" },
    { title: "Take Detroit", emoji: "üöÄ" },
    { title: "Cosmic Crew", emoji: "üåå" }
  ]
};
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Primary Meta Tags -->
    <title>{zachary.name} | Designer & Developer</title>
    <meta name="title" content="{zachary.name} | Designer & Developer" />
    <meta name="description" content="Detroit-based developer and designer creating innovative web solutions. Building AI voice agents, business maps, and digital experiences from Motor City." />
    <meta name="keywords" content="Detroit developer, Michigan web developer, AI voice agents, business mapping, software engineer, web design, Motor City tech" />
    <meta name="author" content="{zachary.name}" />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="English" />
    <meta name="theme-color" content="#ec4899" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://thefakezach.com/" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://thefakezach.com/" />
    <meta property="og:title" content="{zachary.name} | Designer & Developer" />
    <meta property="og:description" content="Detroit-based developer and designer creating innovative web solutions. Building AI voice agents, business maps, and digital experiences from Motor City." />
    <meta property="og:image" content="https://thefakezach.com/og-image.jpg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content="Zachary Lewis - Detroit Developer & Designer" />
    <meta property="og:site_name" content="{zachary.name}" />
    <meta property="og:locale" content="en_US" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://thefakezach.com/" />
    <meta name="twitter:title" content="{zachary.name} | Designer & Developer" />
    <meta name="twitter:description" content="Detroit-based developer and designer creating innovative web solutions. Building AI voice agents, business maps, and digital experiences from Motor City." />
    <meta name="twitter:image" content="https://thefakezach.com/og-image.jpg" />
    <meta name="twitter:image:alt" content="Zachary Lewis - Detroit Developer & Designer" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    
    <!-- Preload Critical Resources -->
    <link rel="preload" href="/fonts/inter.woff2" as="font" type="font/woff2" crossorigin />
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "{zachary.name}",
      "url": "https://thefakezach.com",
      "image": "https://thefakezach.com/og-image.jpg",
      "jobTitle": "Developer & Designer",
      "worksFor": {
        "@type": "Organization",
        "name": "Freelance"
      },
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Detroit",
        "addressRegion": "MI",
        "addressCountry": "US"
      },
      "alumniOf": "University",
      "knowsAbout": ["Web Development", "AI Voice Agents", "Business Mapping", "Software Engineering", "Product Design"],
      "description": "Detroit-based developer and designer creating innovative web solutions.",
      "sameAs": [
        "https://github.com/thefakezach",
        "https://linkedin.com/in/thefakezach"
      ]
    }
    </script>
  </head>

  <body class="bg-zinc-950 text-zinc-50 font-sans min-h-screen flex flex-col">
    <!-- Hero Header -->
    <header class="relative overflow-hidden">
      <!-- Gradient Banner -->
      <div class="h-48 bg-gradient-to-br from-pink-600 via-purple-600 to-indigo-700"></div>

      <!-- Profile Card (Overlaps Banner) -->
      <div class="relative -mt-20 px-4 sm:px-6 max-w-5xl mx-auto">
        <div class="bg-zinc-900/80 backdrop-blur-sm rounded-2xl p-6 shadow-2xl border border-zinc-800">
          <div class="flex flex-col sm:flex-row items-center sm:items-end gap-5">
            <!-- Avatar -->
            <div class="w-24 h-24 sm:w-32 sm:h-32 rounded-full bg-zinc-800 border-4 border-zinc-950 flex items-center justify-center text-5xl sm:text-7xl shadow-xl flex-shrink-0">
              {zachary.avatarEmoji}
            </div>

            <!-- Name & Info -->
            <div class="flex-1 text-center sm:text-left">
              <h1 class="text-2xl sm:text-3xl font-bold text-white">{zachary.name}</h1>
              <p class="text-pink-400 text-lg font-medium" role="complementary">@{zachary.username}</p>
              <p class="text-sm text-zinc-400 mt-1">{zachary.joinDate}</p>
            </div>

            <!-- Action Buttons -->
            <div class="flex gap-3 mt-4 sm:mt-0">
              <ContactButton href={zachary.contact.email} label="Contact" />
              <ProjectsButton href="#projects" label="Projects" />
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 max-w-5xl mx-auto px-4 sm:px-6 py-10 space-y-12 w-full">

      <!-- About & Links (Collapsible on Mobile) -->
      <CollapsibleCard title="About" open={true}>
        <div class="prose prose-invert max-w-none text-zinc-300 text-base md:text-lg leading-relaxed">
          {zachary.about.split('\n').map(line =>
            line.trim() && <p class="mb-3">{line}</p>
          )}
        </div>
      </CollapsibleCard>

      <WallSection
        posts={[
          {
            name: "Chris P.",
            date: "October 28, 2025",
            message: "Loved your Detroit Small Business Map project. Super inspiring!"
          },
          {
            name: "Avery",
            date: "October 27, 2025",
            message: "That Bags of Laundry campaign is genius üí°. Keep it up!"
          },
          {
            name: "Jamie L.",
            date: "October 25, 2025",
            message: "Your AI Voice Concierge concept is üî•. Excited to see where it goes!"
          }
        ]}
      />

      <!-- Projects Section -->
      <ProjectsSection projects={zachary.projects} />
      

    </main>

    <!-- Footer -->
    <footer class="mt-auto border-t border-zinc-800 py-8 text-center text-xs text-zinc-500">
      <p>¬© {new Date().getFullYear()} {zachary.name}. All Rights Reserved.</p>
    </footer>

    <!-- Modals -->
    {zachary.projects.map(project => (
      <Modal project={project} />
    ))}

    <!-- Modal Script (Unchanged) -->
    <script define:vars={{ projects: zachary.projects }}>
      for (const project of projects) {
        const slug = project.title.toLowerCase().replace(/ /g, "-");
        const openButton = document.getElementById(`open-${slug}`);
        const closeButton = document.getElementById(`close-${slug}`);
        const modal = document.getElementById(`modal-${slug}`);

        if (!openButton || !modal) continue;

        openButton.addEventListener("click", () => {
          modal.classList.remove("hidden");
          modal.classList.add("flex");
          modal.setAttribute("aria-hidden", "false");
          document.body.style.overflow = "hidden";
        });

        if (closeButton) {
          closeButton.addEventListener("click", () => {
            modal.classList.add("hidden");
            modal.classList.remove("flex");
            modal.setAttribute("aria-hidden", "true");
            document.body.style.overflow = "";
          });
        }

        modal.addEventListener("click", (e) => {
          if (e.target === modal) {
            modal.classList.add("hidden");
            modal.classList.remove("flex");
            modal.setAttribute("aria-hidden", "true");
            document.body.style.overflow = "";
          }
        });
      }
    </script>
  </body>
</html>